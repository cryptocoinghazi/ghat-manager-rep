EXPENSE TRACKING MODULE - For Existing SQLite App
1. DATABASE MODIFICATIONS (SQLite)
Add to your existing database initialization code:

javascript
// In your database setup file (likely in backend/db.js or similar)
// Add these SQL commands to create expenses table

const createExpensesTable = `
CREATE TABLE IF NOT EXISTS expenses (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  date TEXT NOT NULL DEFAULT CURRENT_DATE,
  category TEXT NOT NULL,
  description TEXT NOT NULL,
  amount REAL NOT NULL,
  payment_mode TEXT DEFAULT 'CASH',
  receipt_number TEXT,
  vendor_name TEXT,
  ghat_location TEXT NOT NULL,
  approved_by TEXT,
  remarks TEXT,
  status TEXT DEFAULT 'APPROVED',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_expenses_date ON expenses(date);
CREATE INDEX IF NOT EXISTS idx_expenses_category ON expenses(category);
CREATE INDEX IF NOT EXISTS idx_expenses_ghat_location ON expenses(ghat_location);
`;

// Add categories table if you want predefined categories
const createCategoriesTable = `
CREATE TABLE IF NOT EXISTS expense_categories (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL UNIQUE,
  description TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT OR IGNORE INTO expense_categories (name, description) VALUES
('LABOR', 'Worker wages and labor costs'),
('FUEL', 'Diesel, petrol, gas'),
('MAINTENANCE', 'Equipment and vehicle maintenance'),
('OFFICE', 'Office supplies and expenses'),
('TRANSPORT', 'Transportation costs'),
('RENT', 'Rent and lease payments'),
('UTILITIES', 'Electricity, water, internet'),
('FOOD', 'Food and refreshments'),
('OTHER', 'Miscellaneous expenses');
`;
2. BACKEND ROUTES (Add to existing routes)
Create backend/routes/expenseRoutes.js:

javascript
const express = require('express');
const router = express.Router();
const db = require('../db'); // Your existing database connection

// Get all expenses with optional filters
router.get('/', async (req, res) => {
  try {
    const { startDate, endDate, category, ghatLocation } = req.query;
    
    let query = 'SELECT * FROM expenses WHERE 1=1';
    const params = [];
    
    if (startDate && endDate) {
      query += ' AND date BETWEEN ? AND ?';
      params.push(startDate, endDate);
    }
    if (category) {
      query += ' AND category = ?';
      params.push(category);
    }
    if (ghatLocation) {
      query += ' AND ghat_location = ?';
      params.push(ghatLocation);
    }
    
    query += ' ORDER BY date DESC, created_at DESC';
    
    db.all(query, params, (err, rows) => {
      if (err) {
        return res.status(500).json({ error: err.message });
      }
      res.json(rows);
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Create new expense
router.post('/', async (req, res) => {
  try {
    const {
      date, category, description, amount, payment_mode,
      receipt_number, vendor_name, ghat_location, approved_by, remarks
    } = req.body;
    
    const sql = `
      INSERT INTO expenses 
      (date, category, description, amount, payment_mode, receipt_number, 
       vendor_name, ghat_location, approved_by, remarks)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `;
    
    const params = [
      date || new Date().toISOString().split('T')[0],
      category, description, amount, payment_mode || 'CASH',
      receipt_number, vendor_name, ghat_location, approved_by, remarks
    ];
    
    db.run(sql, params, function(err) {
      if (err) {
        return res.status(400).json({ error: err.message });
      }
      res.json({
        id: this.lastID,
        message: 'Expense added successfully'
      });
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Get single expense
router.get('/:id', async (req, res) => {
  try {
    db.get('SELECT * FROM expenses WHERE id = ?', [req.params.id], (err, row) => {
      if (err) {
        return res.status(500).json({ error: err.message });
      }
      if (!row) {
        return res.status(404).json({ error: 'Expense not found' });
      }
      res.json(row);
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Update expense
router.put('/:id', async (req, res) => {
  try {
    const {
      date, category, description, amount, payment_mode,
      receipt_number, vendor_name, ghat_location, approved_by, remarks, status
    } = req.body;
    
    const sql = `
      UPDATE expenses SET 
        date = ?, category = ?, description = ?, amount = ?,
        payment_mode = ?, receipt_number = ?, vendor_name = ?,
        ghat_location = ?, approved_by = ?, remarks = ?, status = ?,
        updated_at = CURRENT_TIMESTAMP
      WHERE id = ?
    `;
    
    const params = [
      date, category, description, amount, payment_mode,
      receipt_number, vendor_name, ghat_location, approved_by, remarks, status,
      req.params.id
    ];
    
    db.run(sql, params, function(err) {
      if (err) {
        return res.status(400).json({ error: err.message });
      }
      res.json({
        changes: this.changes,
        message: 'Expense updated successfully'
      });
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Delete expense
router.delete('/:id', async (req, res) => {
  try {
    db.run('DELETE FROM expenses WHERE id = ?', [req.params.id], function(err) {
      if (err) {
        return res.status(500).json({ error: err.message });
      }
      res.json({
        changes: this.changes,
        message: 'Expense deleted successfully'
      });
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Daily expense report
router.get('/reports/daily', async (req, res) => {
  try {
    const { date } = req.query;
    const targetDate = date || new Date().toISOString().split('T')[0];
    
    // Get expenses for the day
    const expensesQuery = `
      SELECT * FROM expenses 
      WHERE date = ? 
      ORDER BY category, amount DESC
    `;
    
    db.all(expensesQuery, [targetDate], (err, expenses) => {
      if (err) {
        return res.status(500).json({ error: err.message });
      }
      
      // Get summary
      const summaryQuery = `
        SELECT 
          COUNT(*) as total_count,
          SUM(amount) as total_amount,
          category,
          SUM(amount) as category_total
        FROM expenses 
        WHERE date = ?
        GROUP BY category
      `;
      
      db.all(summaryQuery, [targetDate], (err, summary) => {
        if (err) {
          return res.status(500).json({ error: err.message });
        }
        
        const totalAmount = summary.reduce((sum, item) => sum + item.category_total, 0);
        
        res.json({
          date: targetDate,
          expenses,
          summary: {
            totalCount: expenses.length,
            totalAmount,
            categoryBreakdown: summary,
            paymentModeBreakdown: [] // You can add this query if needed
          }
        });
      });
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Monthly expense report
router.get('/reports/monthly', async (req, res) => {
  try {
    const { year, month } = req.query;
    const currentYear = new Date().getFullYear();
    const currentMonth = new Date().getMonth() + 1;
    
    const targetYear = year || currentYear;
    const targetMonth = month || currentMonth;
    
    const startDate = `${targetYear}-${targetMonth.toString().padStart(2, '0')}-01`;
    const endDate = `${targetYear}-${targetMonth.toString().padStart(2, '0')}-31`;
    
    // Get monthly expenses
    const expensesQuery = `
      SELECT * FROM expenses 
      WHERE date BETWEEN ? AND ?
      ORDER BY date, category
    `;
    
    db.all(expensesQuery, [startDate, endDate], (err, expenses) => {
      if (err) {
        return res.status(500).json({ error: err.message });
      }
      
      // Get daily totals
      const dailyTotalsQuery = `
        SELECT 
          date,
          COUNT(*) as count,
          SUM(amount) as total
        FROM expenses 
        WHERE date BETWEEN ? AND ?
        GROUP BY date
        ORDER BY date
      `;
      
      db.all(dailyTotalsQuery, [startDate, endDate], (err, dailyTotals) => {
        if (err) {
          return res.status(500).json({ error: err.message });
        }
        
        // Get category totals
        const categoryTotalsQuery = `
          SELECT 
            category,
            SUM(amount) as total
          FROM expenses 
          WHERE date BETWEEN ? AND ?
          GROUP BY category
          ORDER BY total DESC
        `;
        
        db.all(categoryTotalsQuery, [startDate, endDate], (err, categoryTotals) => {
          if (err) {
            return res.status(500).json({ error: err.message });
          }
          
          const monthlyTotal = expenses.reduce((sum, exp) => sum + exp.amount, 0);
          const daysWithExpenses = dailyTotals.length;
          
          res.json({
            period: `${targetYear}-${targetMonth.toString().padStart(2, '0')}`,
            expenses,
            summary: {
              monthlyTotal,
              totalExpenses: expenses.length,
              dailyTotals,
              categoryTotals,
              averageDaily: daysWithExpenses > 0 ? monthlyTotal / daysWithExpenses : 0,
              startDate,
              endDate
            }
          });
        });
      });
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Dashboard summary
router.get('/reports/summary', async (req, res) => {
  try {
    const today = new Date().toISOString().split('T')[0];
    const firstDayOfMonth = new Date();
    firstDayOfMonth.setDate(1);
    const firstDayMonthStr = firstDayOfMonth.toISOString().split('T')[0];
    
    // Today's total
    db.get(
      'SELECT SUM(amount) as total FROM expenses WHERE date = ?',
      [today],
      (err, todayResult) => {
        if (err) return res.status(500).json({ error: err.message });
        
        // This month's total
        db.get(
          `SELECT SUM(amount) as total FROM expenses WHERE date >= ?`,
          [firstDayMonthStr],
          (err, monthResult) => {
            if (err) return res.status(500).json({ error: err.message });
            
            // Category breakdown for month
            db.all(
              `SELECT category, SUM(amount) as total 
               FROM expenses WHERE date >= ? 
               GROUP BY category ORDER BY total DESC`,
              [firstDayMonthStr],
              (err, categories) => {
                if (err) return res.status(500).json({ error: err.message });
                
                res.json({
                  todayTotal: todayResult.total || 0,
                  monthTotal: monthResult.total || 0,
                  categoryMonthly: categories,
                  lastUpdated: new Date().toISOString()
                });
              }
            );
          }
        );
      }
    );
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Get expense categories
router.get('/categories', async (req, res) => {
  try {
    db.all('SELECT * FROM expense_categories ORDER BY name', [], (err, rows) => {
      if (err) {
        return res.status(500).json({ error: err.message });
      }
      res.json(rows);
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;
3. INTEGRATE WITH EXISTING BACKEND
In your main server file (e.g., backend/server.js or backend/index.js):

javascript
// Add after your existing routes
const expenseRoutes = require('./routes/expenseRoutes');
app.use('/api/expenses', expenseRoutes);
4. FRONTEND COMPONENTS - Add to existing React app
A. Create frontend/src/components/expense/ExpenseForm.js:

jsx
import React, { useState, useEffect } from 'react';

const ExpenseForm = ({ expense, onSubmit, onCancel, ghats }) => {
  const [formData, setFormData] = useState({
    date: new Date().toISOString().split('T')[0],
    category: 'LABOR',
    description: '',
    amount: '',
    payment_mode: 'CASH',
    receipt_number: '',
    vendor_name: '',
    ghat_location: ghats && ghats.length > 0 ? ghats[0] : '',
    approved_by: '',
    remarks: ''
  });

  const categories = [
    'LABOR', 'FUEL', 'MAINTENANCE', 'OFFICE', 
    'TRANSPORT', 'RENT', 'UTILITIES', 'FOOD', 'OTHER'
  ];

  const paymentModes = ['CASH', 'BANK_TRANSFER', 'UPI', 'CHEQUE', 'CREDIT'];

  useEffect(() => {
    if (expense) {
      setFormData({
        ...expense,
        date: expense.date || new Date().toISOString().split('T')[0]
      });
    }
  }, [expense]);

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    onSubmit(formData);
  };

  return (
    <div className="bg-white p-4 rounded-lg shadow">
      <h3 className="text-lg font-semibold mb-4">
        {expense ? 'Edit Expense' : 'Add New Expense'}
      </h3>
      
      <form onSubmit={handleSubmit}>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          {/* Date */}
          <div>
            <label className="block text-sm font-medium mb-1">Date *</label>
            <input
              type="date"
              name="date"
              value={formData.date}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              required
            />
          </div>

          {/* Category */}
          <div>
            <label className="block text-sm font-medium mb-1">Category *</label>
            <select
              name="category"
              value={formData.category}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              required
            >
              {categories.map(cat => (
                <option key={cat} value={cat}>{cat}</option>
              ))}
            </select>
          </div>

          {/* Description */}
          <div className="md:col-span-2">
            <label className="block text-sm font-medium mb-1">Description *</label>
            <input
              type="text"
              name="description"
              value={formData.description}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              placeholder="Enter expense description"
              required
            />
          </div>

          {/* Amount */}
          <div>
            <label className="block text-sm font-medium mb-1">Amount (₹) *</label>
            <input
              type="number"
              name="amount"
              value={formData.amount}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              placeholder="0.00"
              step="0.01"
              required
            />
          </div>

          {/* Payment Mode */}
          <div>
            <label className="block text-sm font-medium mb-1">Payment Mode</label>
            <select
              name="payment_mode"
              value={formData.payment_mode}
              onChange={handleChange}
              className="w-full p-2 border rounded"
            >
              {paymentModes.map(mode => (
                <option key={mode} value={mode}>
                  {mode.replace('_', ' ')}
                </option>
              ))}
            </select>
          </div>

          {/* Ghat Location */}
          <div>
            <label className="block text-sm font-medium mb-1">Ghat Location *</label>
            <input
              type="text"
              name="ghat_location"
              value={formData.ghat_location}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              placeholder="Enter ghat location"
              required
            />
          </div>

          {/* Vendor Name */}
          <div>
            <label className="block text-sm font-medium mb-1">Vendor Name</label>
            <input
              type="text"
              name="vendor_name"
              value={formData.vendor_name}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              placeholder="Vendor name (if any)"
            />
          </div>

          {/* Receipt Number */}
          <div>
            <label className="block text-sm font-medium mb-1">Receipt Number</label>
            <input
              type="text"
              name="receipt_number"
              value={formData.receipt_number}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              placeholder="Receipt number (if any)"
            />
          </div>

          {/* Approved By */}
          <div>
            <label className="block text-sm font-medium mb-1">Approved By</label>
            <input
              type="text"
              name="approved_by"
              value={formData.approved_by}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              placeholder="Name of approver"
            />
          </div>

          {/* Remarks */}
          <div className="md:col-span-2">
            <label className="block text-sm font-medium mb-1">Remarks</label>
            <textarea
              name="remarks"
              value={formData.remarks}
              onChange={handleChange}
              className="w-full p-2 border rounded"
              rows="3"
              placeholder="Additional notes"
            />
          </div>
        </div>

        <div className="flex justify-end space-x-2 mt-4">
          {onCancel && (
            <button
              type="button"
              onClick={onCancel}
              className="px-4 py-2 border rounded text-gray-600 hover:bg-gray-50"
            >
              Cancel
            </button>
          )}
          <button
            type="submit"
            className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
          >
            {expense ? 'Update Expense' : 'Add Expense'}
          </button>
        </div>
      </form>
    </div>
  );
};

export default ExpenseForm;
B. Create frontend/src/components/expense/ExpenseList.js:

jsx
import React, { useState, useEffect } from 'react';
import { format } from 'date-fns';

const ExpenseList = ({ expenses, onEdit, onDelete, onView }) => {
  const [filteredExpenses, setFilteredExpenses] = useState([]);
  const [filters, setFilters] = useState({
    category: '',
    startDate: '',
    endDate: ''
  });

  useEffect(() => {
    setFilteredExpenses(expenses);
  }, [expenses]);

  const applyFilters = () => {
    let filtered = [...expenses];
    
    if (filters.category) {
      filtered = filtered.filter(exp => exp.category === filters.category);
    }
    
    if (filters.startDate) {
      filtered = filtered.filter(exp => exp.date >= filters.startDate);
    }
    
    if (filters.endDate) {
      filtered = filtered.filter(exp => exp.date <= filters.endDate);
    }
    
    setFilteredExpenses(filtered);
  };

  const resetFilters = () => {
    setFilters({ category: '', startDate: '', endDate: '' });
    setFilteredExpenses(expenses);
  };

  const categories = [...new Set(expenses.map(exp => exp.category))];

  return (
    <div>
      {/* Filters */}
      <div className="bg-white p-4 rounded-lg shadow mb-4">
        <h4 className="font-medium mb-3">Filter Expenses</h4>
        <div className="grid grid-cols-1 md:grid-cols-4 gap-3">
          <select
            value={filters.category}
            onChange={(e) => setFilters({...filters, category: e.target.value})}
            className="p-2 border rounded"
          >
            <option value="">All Categories</option>
            {categories.map(cat => (
              <option key={cat} value={cat}>{cat}</option>
            ))}
          </select>
          
          <input
            type="date"
            value={filters.startDate}
            onChange={(e) => setFilters({...filters, startDate: e.target.value})}
            className="p-2 border rounded"
            placeholder="From Date"
          />
          
          <input
            type="date"
            value={filters.endDate}
            onChange={(e) => setFilters({...filters, endDate: e.target.value})}
            className="p-2 border rounded"
            placeholder="To Date"
          />
          
          <div className="flex space-x-2">
            <button
              onClick={applyFilters}
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
            >
              Apply
            </button>
            <button
              onClick={resetFilters}
              className="px-4 py-2 border rounded text-gray-600 hover:bg-gray-50"
            >
              Reset
            </button>
          </div>
        </div>
      </div>

      {/* Expenses Table */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <div className="overflow-x-auto">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Category</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Description</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Amount</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ghat</th>
                <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {filteredExpenses.map(expense => (
                <tr key={expense.id} className="hover:bg-gray-50">
                  <td className="px-6 py-4 whitespace-nowrap text-sm">
                    {expense.date}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap">
                    <span className="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">
                      {expense.category}
                    </span>
                  </td>
                  <td className="px-6 py-4 text-sm max-w-xs truncate" title={expense.description}>
                    {expense.description}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap font-medium">
                    ₹{parseFloat(expense.amount).toFixed(2)}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm">
                    {expense.ghat_location}
                  </td>
                  <td className="px-6 py-4 whitespace-nowrap text-sm">
                    <div className="flex space-x-2">
                      <button
                        onClick={() => onView && onView(expense)}
                        className="text-blue-600 hover:text-blue-800"
                      >
                        View
                      </button>
                      <button
                        onClick={() => onEdit && onEdit(expense)}
                        className="text-green-600 hover:text-green-800"
                      >
                        Edit
                      </button>
                      <button
                        onClick={() => onDelete && onDelete(expense.id)}
                        className="text-red-600 hover:text-red-800"
                      >
                        Delete
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
            {filteredExpenses.length > 0 && (
              <tfoot className="bg-gray-50">
                <tr>
                  <td colSpan="3" className="px-6 py-3 text-right font-medium">
                    Total:
                  </td>
                  <td className="px-6 py-3 font-bold">
                    ₹{filteredExpenses.reduce((sum, exp) => sum + parseFloat(exp.amount), 0).toFixed(2)}
                  </td>
                  <td colSpan="2"></td>
                </tr>
              </tfoot>
            )}
          </table>
          
          {filteredExpenses.length === 0 && (
            <div className="text-center py-8 text-gray-500">
              No expenses found
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default ExpenseList;
C. Create frontend/src/components/expense/ExpenseReports.js:

jsx
import React, { useState, useEffect } from 'react';

const ExpenseReports = () => {
  const [reportType, setReportType] = useState('daily');
  const [dailyReport, setDailyReport] = useState(null);
  const [monthlyReport, setMonthlyReport] = useState(null);
  const [summary, setSummary] = useState(null);
  const [selectedDate, setSelectedDate] = useState(
    new Date().toISOString().split('T')[0]
  );
  const [selectedMonth, setSelectedMonth] = useState(
    new Date().toISOString().slice(0, 7)
  );

  const fetchDailyReport = async (date) => {
    try {
      const response = await fetch(`/api/expenses/reports/daily?date=${date}`);
      const data = await response.json();
      setDailyReport(data);
    } catch (error) {
      console.error('Error fetching daily report:', error);
    }
  };

  const fetchMonthlyReport = async (month) => {
    try {
      const [year, monthNum] = month.split('-');
      const response = await fetch(`/api/expenses/reports/monthly?year=${year}&month=${monthNum}`);
      const data = await response.json();
      setMonthlyReport(data);
    } catch (error) {
      console.error('Error fetching monthly report:', error);
    }
  };

  const fetchSummary = async () => {
    try {
      const response = await fetch('/api/expenses/reports/summary');
      const data = await response.json();
      setSummary(data);
    } catch (error) {
      console.error('Error fetching summary:', error);
    }
  };

  useEffect(() => {
    if (reportType === 'daily') {
      fetchDailyReport(selectedDate);
    } else if (reportType === 'monthly') {
      fetchMonthlyReport(selectedMonth);
    }
    fetchSummary();
  }, [reportType, selectedDate, selectedMonth]);

  const printReport = () => {
    window.print();
  };

  const exportToCSV = (data, filename) => {
    const headers = Object.keys(data[0] || {}).join(',');
    const rows = data.map(row => 
      Object.values(row).map(val => 
        typeof val === 'string' ? `"${val.replace(/"/g, '""')}"` : val
      ).join(',')
    ).join('\n');
    
    const csv = `${headers}\n${rows}`;
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${filename}.csv`;
    a.click();
  };

  return (
    <div className="space-y-6">
      {/* Summary Cards */}
      {summary && (
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="bg-white p-4 rounded-lg shadow">
            <h3 className="text-sm font-medium text-gray-500">Today's Expenses</h3>
            <p className="text-2xl font-bold text-green-600">
              ₹{summary.todayTotal.toFixed(2)}
            </p>
          </div>
          <div className="bg-white p-4 rounded-lg shadow">
            <h3 className="text-sm font-medium text-gray-500">This Month</h3>
            <p className="text-2xl font-bold text-blue-600">
              ₹{summary.monthTotal.toFixed(2)}
            </p>
          </div>
          <div className="bg-white p-4 rounded-lg shadow">
            <h3 className="text-sm font-medium text-gray-500">Top Category</h3>
            <p className="text-lg font-semibold">
              {summary.categoryMonthly[0]?.category || 'N/A'}
            </p>
            <p className="text-sm text-gray-600">
              ₹{summary.categoryMonthly[0]?.total?.toFixed(2) || '0.00'}
            </p>
          </div>
        </div>
      )}

      {/* Report Type Selector */}
      <div className="bg-white p-4 rounded-lg shadow">
        <div className="flex flex-wrap items-center justify-between gap-4">
          <div className="flex space-x-2">
            <button
              onClick={() => setReportType('daily')}
              className={`px-4 py-2 rounded ${
                reportType === 'daily'
                  ? 'bg-blue-600 text-white'
                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
              }`}
            >
              Daily Report
            </button>
            <button
              onClick={() => setReportType('monthly')}
              className={`px-4 py-2 rounded ${
                reportType === 'monthly'
                  ? 'bg-blue-600 text-white'
                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
              }`}
            >
              Monthly Report
            </button>
          </div>

          {reportType === 'daily' ? (
            <input
              type="date"
              value={selectedDate}
              onChange={(e) => setSelectedDate(e.target.value)}
              className="p-2 border rounded"
            />
          ) : (
            <input
              type="month"
              value={selectedMonth}
              onChange={(e) => setSelectedMonth(e.target.value)}
              className="p-2 border rounded"
            />
          )}

          <div className="flex space-x-2">
            <button
              onClick={printReport}
              className="px-4 py-2 border rounded hover:bg-gray-50"
            >
              Print
            </button>
            {reportType === 'daily' && dailyReport?.expenses && (
              <button
                onClick={() => exportToCSV(dailyReport.expenses, `daily_expenses_${selectedDate}`)}
                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
              >
                Export CSV
              </button>
            )}
          </div>
        </div>
      </div>

      {/* Daily Report */}
      {reportType === 'daily' && dailyReport && (
        <div className="bg-white rounded-lg shadow">
          <div className="p-4 border-b">
            <h3 className="text-lg font-semibold">
              Daily Expense Report - {dailyReport.date}
            </h3>
            <div className="flex justify-between items-center mt-2">
              <div>
                <span className="text-gray-600">Total Expenses: </span>
                <span className="font-bold">{dailyReport.summary.totalCount}</span>
              </div>
              <div>
                <span className="text-gray-600">Total Amount: </span>
                <span className="font-bold text-xl text-blue-600">
                  ₹{dailyReport.summary.totalAmount.toFixed(2)}
                </span>
              </div>
            </div>
          </div>

          {/* Category Breakdown */}
          <div className="p-4 border-b">
            <h4 className="font-medium mb-2">Category Breakdown</h4>
            <div className="space-y-2">
              {dailyReport.summary.categoryBreakdown.map((cat, index) => (
                <div key={index} className="flex items-center">
                  <div className="w-32 font-medium">{cat.category}</div>
                  <div className="flex-1">
                    <div className="h-4 bg-gray-200 rounded overflow-hidden">
                      <div 
                        className="h-full bg-blue-500"
                        style={{ 
                          width: `${(cat.category_total / dailyReport.summary.totalAmount) * 100}%` 
                        }}
                      ></div>
                    </div>
                  </div>
                  <div className="w-24 text-right font-medium">
                    ₹{cat.category_total.toFixed(2)}
                  </div>
                </div>
              ))}
            </div>
          </div>

          {/* Expense Details */}
          <div className="p-4">
            <h4 className="font-medium mb-3">Expense Details</h4>
            <div className="overflow-x-auto">
              <table className="min-w-full text-sm">
                <thead>
                  <tr className="border-b">
                    <th className="py-2 text-left">Description</th>
                    <th className="py-2 text-left">Category</th>
                    <th className="py-2 text-left">Amount</th>
                    <th className="py-2 text-left">Payment Mode</th>
                  </tr>
                </thead>
                <tbody>
                  {dailyReport.expenses.map(exp => (
                    <tr key={exp.id} className="border-b hover:bg-gray-50">
                      <td className="py-2">{exp.description}</td>
                      <td className="py-2">
                        <span className="px-2 py-1 text-xs rounded-full bg-gray-100">
                          {exp.category}
                        </span>
                      </td>
                      <td className="py-2 font-medium">
                        ₹{parseFloat(exp.amount).toFixed(2)}
                      </td>
                      <td className="py-2">{exp.payment_mode}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      )}

      {/* Monthly Report */}
      {reportType === 'monthly' && monthlyReport && (
        <div className="bg-white rounded-lg shadow">
          <div className="p-4 border-b">
            <h3 className="text-lg font-semibold">
              Monthly Expense Report - {monthlyReport.period}
            </h3>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-3">
              <div className="text-center p-3 bg-blue-50 rounded">
                <div className="text-2xl font-bold text-blue-600">
                  ₹{monthlyReport.summary.monthlyTotal.toFixed(2)}
                </div>
                <div className="text-sm text-gray-600">Total Amount</div>
              </div>
              <div className="text-center p-3 bg-green-50 rounded">
                <div className="text-2xl font-bold text-green-600">
                  {monthlyReport.summary.totalExpenses}
                </div>
                <div className="text-sm text-gray-600">Total Expenses</div>
              </div>
              <div className="text-center p-3 bg-purple-50 rounded">
                <div className="text-2xl font-bold text-purple-600">
                  {monthlyReport.summary.dailyTotals.length}
                </div>
                <div className="text-sm text-gray-600">Days with Expenses</div>
              </div>
              <div className="text-center p-3 bg-yellow-50 rounded">
                <div className="text-2xl font-bold text-yellow-600">
                  ₹{monthlyReport.summary.averageDaily.toFixed(2)}
                </div>
                <div className="text-sm text-gray-600">Average Daily</div>
              </div>
            </div>
          </div>

          {/* Daily Trend Chart */}
          <div className="p-4 border-b">
            <h4 className="font-medium mb-3">Daily Expense Trend</h4>
            <div className="flex items-end h-40 space-x-1">
              {monthlyReport.summary.dailyTotals.map(day => (
                <div key={day.day} className="flex-1 flex flex-col items-center">
                  <div 
                    className="w-full bg-blue-500 rounded-t"
                    style={{ 
                      height: `${(day.total / monthlyReport.summary.monthlyTotal) * 100}%`,
                      maxHeight: '100px'
                    }}
                    title={`₹${day.total.toFixed(2)}`}
                  ></div>
                  <div className="text-xs mt-1">{day.day}</div>
                </div>
              ))}
            </div>
          </div>

          {/* Category Distribution */}
          <div className="p-4">
            <h4 className="font-medium mb-3">Category Distribution</h4>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              {monthlyReport.summary.categoryTotals.map(cat => (
                <div key={cat.category} className="border rounded p-3">
                  <div className="flex justify-between items-center">
                    <span className="font-medium">{cat.category}</span>
                    <span className="font-bold">₹{cat.total.toFixed(2)}</span>
                  </div>
                  <div className="mt-2 h-2 bg-gray-200 rounded overflow-hidden">
                    <div 
                      className="h-full bg-green-500"
                      style={{ 
                        width: `${(cat.total / monthlyReport.summary.monthlyTotal) * 100}%` 
                      }}
                    ></div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default ExpenseReports;
5. MAIN EXPENSE PAGE - Add to your existing pages
Create frontend/src/pages/ExpensesPage.js:

jsx
import React, { useState, useEffect } from 'react';
import ExpenseForm from '../components/expense/ExpenseForm';
import ExpenseList from '../components/expense/ExpenseList';
import ExpenseReports from '../components/expense/ExpenseReports';
import { toast } from 'react-toastify';

const ExpensesPage = () => {
  const [expenses, setExpenses] = useState([]);
  const [showForm, setShowForm] = useState(false);
  const [editingExpense, setEditingExpense] = useState(null);
  const [activeTab, setActiveTab] = useState('list'); // 'list', 'add', 'reports'

  const fetchExpenses = async () => {
    try {
      const response = await fetch('/api/expenses');
      const data = await response.json();
      setExpenses(data);
    } catch (error) {
      toast.error('Error fetching expenses');
    }
  };

  useEffect(() => {
    fetchExpenses();
  }, []);

  const handleAddExpense = async (expenseData) => {
    try {
      const response = await fetch('/api/expenses', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(expenseData)
      });
      
      if (response.ok) {
        toast.success('Expense added successfully');
        setShowForm(false);
        fetchExpenses();
      } else {
        toast.error('Failed to add expense');
      }
    } catch (error) {
      toast.error('Error adding expense');
    }
  };

  const handleUpdateExpense = async (expenseData) => {
    try {
      const response = await fetch(`/api/expenses/${editingExpense.id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(expenseData)
      });
      
      if (response.ok) {
        toast.success('Expense updated successfully');
        setEditingExpense(null);
        fetchExpenses();
      } else {
        toast.error('Failed to update expense');
      }
    } catch (error) {
      toast.error('Error updating expense');
    }
  };

  const handleDeleteExpense = async (id) => {
    if (window.confirm('Are you sure you want to delete this expense?')) {
      try {
        const response = await fetch(`/api/expenses/${id}`, {
          method: 'DELETE'
        });
        
        if (response.ok) {
          toast.success('Expense deleted successfully');
          fetchExpenses();
        } else {
          toast.error('Failed to delete expense');
        }
      } catch (error) {
        toast.error('Error deleting expense');
      }
    }
  };

  const handleEditExpense = (expense) => {
    setEditingExpense(expense);
    setActiveTab('add');
  };

  return (
    <div className="container mx-auto px-4 py-6">
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-800">Expense Management</h1>
        <p className="text-gray-600">Track and manage daily expenses for ghat operations</p>
      </div>

      {/* Tabs */}
      <div className="mb-6 border-b">
        <nav className="flex space-x-4">
          <button
            onClick={() => setActiveTab('list')}
            className={`py-2 px-4 border-b-2 font-medium text-sm ${
              activeTab === 'list'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700'
            }`}
          >
            Expense List
          </button>
          <button
            onClick={() => setActiveTab('add')}
            className={`py-2 px-4 border-b-2 font-medium text-sm ${
              activeTab === 'add'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700'
            }`}
          >
            {editingExpense ? 'Edit Expense' : 'Add New Expense'}
          </button>
          <button
            onClick={() => setActiveTab('reports')}
            className={`py-2 px-4 border-b-2 font-medium text-sm ${
              activeTab === 'reports'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700'
            }`}
          >
            Reports
          </button>
        </nav>
      </div>

      {/* Content */}
      {activeTab === 'list' && (
        <>
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-lg font-semibold">All Expenses</h2>
            <button
              onClick={() => {
                setEditingExpense(null);
                setActiveTab('add');
              }}
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
            >
              + Add Expense
            </button>
          </div>
          <ExpenseList
            expenses={expenses}
            onEdit={handleEditExpense}
            onDelete={handleDeleteExpense}
          />
        </>
      )}

      {activeTab === 'add' && (
        <div className="max-w-4xl mx-auto">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-lg font-semibold">
              {editingExpense ? 'Edit Expense' : 'Add New Expense'}
            </h2>
            <button
              onClick={() => {
                setEditingExpense(null);
                setActiveTab('list');
              }}
              className="px-4 py-2 border rounded text-gray-600 hover:bg-gray-50"
            >
              ← Back to List
            </button>
          </div>
          <ExpenseForm
            expense={editingExpense}
            onSubmit={editingExpense ? handleUpdateExpense : handleAddExpense}
            onCancel={() => {
              setEditingExpense(null);
              setActiveTab('list');
            }}
          />
        </div>
      )}

      {activeTab === 'reports' && (
        <div>
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-lg font-semibold">Expense Reports</h2>
            <button
              onClick={() => setActiveTab('list')}
              className="px-4 py-2 border rounded text-gray-600 hover:bg-gray-50"
            >
              ← Back to List
            </button>
          </div>
          <ExpenseReports />
        </div>
      )}
    </div>
  );
};

export default ExpensesPage;
6. UPDATE NAVIGATION
In your navigation component (e.g., frontend/src/components/Navbar.js):

jsx
// Add this to your navigation links
<Link to="/expenses" className="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded">
  <CurrencyRupeeIcon className="h-5 w-5 mr-2" />
  Expenses
</Link>
7. ADD ROUTE
In your App.js or routing file:

jsx
import ExpensesPage from './pages/ExpensesPage';

// Add this route
<Route path="/expenses" element={<ExpensesPage />} />
8. EXECUTION INSTRUCTIONS
Step-by-step commands to implement:

bash
# 1. Update database schema
cd backend
# Edit your database initialization file to add:
#   CREATE TABLE IF NOT EXISTS expenses ...
#   CREATE TABLE IF NOT EXISTS expense_categories ...

# 2. Create expense routes
touch routes/expenseRoutes.js
# Paste the expenseRoutes.js content

# 3. Update main server file
# Add: const expenseRoutes = require('./routes/expenseRoutes');
# Add: app.use('/api/expenses', expenseRoutes);

# 4. Create frontend directories
cd ../frontend/src
mkdir -p components/expense pages

# 5. Create component files
touch components/expense/ExpenseForm.js
touch components/expense/ExpenseList.js
touch components/expense/ExpenseReports.js
touch pages/ExpensesPage.js

# 6. Update navigation
# Edit your Navbar.js to add Expenses link

# 7. Add route in App.js
# Add import and route for ExpensesPage

# 8. Install date-fns for date formatting (optional)
cd ../frontend
npm install date-fns

# 9. Test the implementation
npm start
9. FEATURES ADDED:
Expense CRUD Operations:

Add, edit, delete expenses

View expense details

Expense Categories:

Predefined categories (LABOR, FUEL, etc.)

Easy category selection

Filtering & Search:

Filter by date range

Filter by category

Filter by ghat location

Daily Reports:

View daily expense summary

Category breakdown

Export to CSV

Monthly Reports:

Monthly expense trends

Category distribution

Daily expense charts

Average daily expenses

Dashboard Summary:

Today's total

Month-to-date total

Top spending categories

Print & Export:

Print reports

Export to CSV

Visual charts for trends

The system integrates seamlessly with your existing SQLite database and doesn't require any external dependencies or major architectural changes.